version: '3'
services:
  zookeeper:
    image: parrotstream/zookeeper:latest
    ports:
    - 2181:2181
    - 2888:2888
    - 3888:3888
    - 8080:8080
    networks:
    - parrot
  kudu-master:
    build:
      context: .
      dockerfile: Dockerfile
    image: parrotstream/kudu:latest
    networks:
      parrot:
        aliases:
        - kudu
    cap_add:
    - SYS_TIME
    links:
    - zookeeper
    ports:
    - 7051:7051
    - 8051:8051
    environment:
      KUDU_MASTER: "true"
  kudu-tserver:
    build:
      context: .
      dockerfile: Dockerfile
    image: parrotstream/kudu:latest
    networks:
    - parrot
    cap_add:
    - SYS_TIME
    ports:
    - 7050:7050
    - 8050:8050
    environment:
      KUDU_MASTER: "false"
networks:
  default:
    external:
      name: parrot
  parrot:
    driver: bridge
